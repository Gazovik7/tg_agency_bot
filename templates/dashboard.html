<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¢–µ—Å—Ç–æ–≤–æ–µ –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ</title>
    
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <div class="dashboard-header">
            <div>
                <h1 class="dashboard-title">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¢–µ—Å—Ç–æ–≤–æ–µ –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ</h1>
                <p class="dashboard-subtitle">–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏</p>
            </div>
            <div class="d-flex align-items-center gap-3">
                <a href="/team-management" class="btn btn-outline-primary">
                    <i class="fas fa-users"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏
                </a>
                <span class="badge bg-primary" id="currentPeriod">–ü–µ—Ä–∏–æ–¥: 2025-05-01 - 2025-05-25</span>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2 class="card-title">–§–∏–ª—å—Ç—Ä—ã</h2>
            </div>
            <div class="card-body">
                <form id="filtersForm" class="filters-container">
                    <div class="form-group">
                        <label for="chatFilter" class="form-label">–ß–∞—Ç:</label>
                        <select class="form-select" id="chatFilter" name="chat_id">
                            <option value="">–í—Å–µ —á–∞—Ç—ã</option>
                            <!-- Options will be populated via JavaScript -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="employeeFilter" class="form-label">–°–æ—Ç—Ä—É–¥–Ω–∏–∫:</label>
                        <select class="form-select" id="employeeFilter" name="employee_id">
                            <option value="">–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
                            <!-- Options will be populated via JavaScript -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="startDate" class="form-label">–ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞:</label>
                        <input type="date" class="form-control" id="startDate" name="start_date">
                    </div>

                    <div class="form-group">
                        <label for="endDate" class="form-label">–ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞:</label>
                        <input type="date" class="form-control" id="endDate" name="end_date">
                    </div>

                    <div class="form-group d-flex align-items-end">
                        <button type="submit" class="btn btn-primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            </div>
            <div class="card-body">
                <div class="grid">
                    <div class="stat-card">
                        <div class="stat-title">–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
                        <div class="stat-value" id="totalMessagesStats">0</div>
                        <div class="stat-description">–ó–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">–í—Å–µ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤</div>
                        <div class="stat-value" id="totalSymbolsStats">0</div>
                        <div class="stat-description">–û–±—â–∏–π –æ–±—ä–µ–º –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">–°–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã</div>
                        <div class="stat-value" id="teamMessagesStats">0</div>
                        <div class="stat-description" id="teamMessagesPercent">56% –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">–°–æ–æ–±—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                        <div class="stat-value" id="clientMessagesStats">0</div>
                        <div class="stat-description" id="clientMessagesPercent">44% –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</div>
                        <div class="stat-value" id="avgResponseStats">0 –º–∏–Ω</div>
                        <div class="stat-description">–í—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</div>
                        <div class="stat-value" id="maxResponseStats">0 –º–∏–Ω</div>
                        <div class="stat-description">–°–∞–º—ã–π –¥–æ–ª–≥–∏–π –æ—Ç–≤–µ—Ç</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">–ú–µ–¥–∏–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</div>
                        <div class="stat-value" id="medianResponseStats">0 –º–∏–Ω</div>
                        <div class="stat-description">–¢–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∏ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π -->
        <div class="tab-container">
            <ul class="tabs" id="analytics-tabs">
                <li class="tab-item active" data-tab="employees">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</li>
                <li class="tab-item" data-tab="clients">–ö–ª–∏–µ–Ω—Ç—ã</li>
                <li class="tab-item" data-tab="activity">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</li>
                <li class="tab-item" data-tab="sentiment">–¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å</li>
                <li class="tab-item" data-tab="communications">–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏</li>
            </ul>

            <div class="tab-content">
                <!-- –í–∫–ª–∞–¥–∫–∞ –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ -->
                <div class="tab-pane active" id="employees">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                        </div>
                        <div class="card-body">
                            <div class="chart-container" id="employeeActivityChart"></div>
                        </div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –ö–ª–∏–µ–Ω—Ç—ã -->
                <div class="tab-pane" id="clients">
                    <div class="clients-overview">
                        <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
                        <div class="row mb-4">
                            <div class="col-md-3">
                                <div class="stat-card clients-stat">
                                    <div class="stat-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div class="stat-content">
                                        <div class="stat-title">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                                        <div class="stat-value" id="totalActiveClients">0</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card clients-stat">
                                    <div class="stat-icon">
                                        <i class="fas fa-comments"></i>
                                    </div>
                                    <div class="stat-content">
                                        <div class="stat-title">–°–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                                        <div class="stat-value" id="totalClientMessages">0</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card clients-stat">
                                    <div class="stat-icon">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="stat-content">
                                        <div class="stat-title">–°—Ä–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞</div>
                                        <div class="stat-value" id="avgMessagesPerClient">0</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card clients-stat">
                                    <div class="stat-icon">
                                        <i class="fas fa-font"></i>
                                    </div>
                                    <div class="stat-content">
                                        <div class="stat-title">–û–±—â–∏–π –æ–±—ä–µ–º —Ç–µ–∫—Å—Ç–∞</div>
                                        <div class="stat-value" id="totalClientCharacters">0</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
                        <div class="row">
                            <div class="col-lg-8">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤</h3>
                                        <div class="chart-controls">
                                            <button class="btn btn-sm btn-outline-primary active" onclick="toggleClientChartType('messages')">–ü–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º</button>
                                            <button class="btn btn-sm btn-outline-primary" onclick="toggleClientChartType('characters')">–ü–æ —Å–∏–º–≤–æ–ª–∞–º</button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-container" id="clientActivityChart"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">–î–æ–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-container" id="clientDistributionChart"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö -->
                        <div class="card mt-4">
                            <div class="card-header">
                                <h3 class="card-title">–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö</h3>
                                <div class="client-view-controls">
                                    <button class="btn btn-sm btn-outline-primary active" onclick="toggleClientView('cards')">
                                        <i class="fas fa-th-large"></i> –ö–∞—Ä—Ç–æ—á–∫–∏
                                    </button>
                                    <button class="btn btn-sm btn-outline-primary" onclick="toggleClientView('table')">
                                        <i class="fas fa-table"></i> –¢–∞–±–ª–∏—Ü–∞
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
                                <div id="clientCardsView" class="grid-compact">
                                    <!-- Client cards will be populated here -->
                                </div>

                                <!-- –¢–∞–±–ª–∏—Ü–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
                                <div id="clientTableView" class="table-container" style="display: none;">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>–ö–ª–∏–µ–Ω—Ç</th>
                                                <th>–°–æ–æ–±—â–µ–Ω–∏—è (–ù–∞—à–∞ / –ò—Ö)</th>
                                                <th>–°–∏–º–≤–æ–ª—ã (–ù–∞—à–∞ / –ò—Ö)</th>
                                                <th>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</th>
                                                <th>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</th>
                                                <th>–ú–µ–¥–∏–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</th>
                                                <th>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å</th>
                                            </tr>
                                        </thead>
                                        <tbody id="clientsTableBody">
                                            <!-- Client rows will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -->
                <div class="tab-pane" id="activity">
                    <!-- –°–µ–ª–µ–∫—Ç–æ—Ä –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ -->
                    <div class="card mb-3">
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-md-3">
                                    <label for="activityGrouping" class="form-label">–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ:</label>
                                    <select class="form-select" id="activityGrouping">
                                        <option value="day">–î–µ–Ω—å</option>
                                        <option value="week">–ù–µ–¥–µ–ª—è</option>
                                        <option value="month">–ú–µ—Å—è—Ü</option>
                                    </select>
                                </div>
                                <div class="col-md-9">
                                    <p class="mb-0 text-muted">
                                        <small>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–ø–∏—Å–æ–∫</small>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –ë–ª–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Ü–∏—Ñ—Ä -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3 class="card-title">–ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="stat-card activity-stat">
                                        <div class="stat-icon">
                                            <i class="fas fa-comments"></i>
                                        </div>
                                        <div class="stat-content">
                                            <div class="stat-title">–û–±—â–µ–µ —á–∏—Å–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
                                            <div class="stat-value" id="activityTotalMessages">0</div>
                                            <div class="stat-description">–ó–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stat-card activity-stat">
                                        <div class="stat-icon">
                                            <i class="fas fa-chart-line"></i>
                                        </div>
                                        <div class="stat-content">
                                            <div class="stat-title">–°—Ä–µ–¥–Ω–µ–µ –Ω–∞ –ø–µ—Ä–∏–æ–¥</div>
                                            <div class="stat-value" id="activityAvgPerPeriod">0</div>
                                            <div class="stat-description" id="activityAvgLabel">—Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stat-card activity-stat">
                                        <div class="stat-icon">
                                            <i class="fas fa-trophy"></i>
                                        </div>
                                        <div class="stat-content">
                                            <div class="stat-title">–ü–∏–∫–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥</div>
                                            <div class="stat-value" id="activityPeakPeriod">-</div>
                                            <div class="stat-description" id="activityPeakCount">0 —Å–æ–æ–±—â–µ–Ω–∏–π</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stat-card activity-stat">
                                        <div class="stat-icon">
                                            <i class="fas fa-clock"></i>
                                        </div>
                                        <div class="stat-content">
                                            <div class="stat-title">–ü–∏–∫–æ–≤—ã–π —á–∞—Å</div>
                                            <div class="stat-value" id="activityPeakHour">-</div>
                                            <div class="stat-description" id="activityPeakHourCount">0 —Å–æ–æ–±—â–µ–Ω–∏–π</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Time-series –≥—Ä–∞—Ñ–∏–∫ -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3 class="card-title">–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —à–∫–∞–ª–µ</h3>
                        </div>
                        <div class="card-body">
                            <div class="chart-container" id="activityTimeSeriesChart"></div>
                        </div>
                    </div>

                    <!-- –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –ø–æ —á–∞—Å–∞–º -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3 class="card-title">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —á–∞—Å–∞–º</h3>
                        </div>
                        <div class="card-body">
                            <div class="chart-container" id="activityHourHistogram"></div>
                        </div>
                    </div>

                    <!-- –¢–µ–ø–ª–æ–≤—ã–µ –∫–∞—Ä—Ç—ã -->
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –¥–Ω—è–º –∏ —á–∞—Å–∞–º</h3>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container" id="activityClientHeatmap"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø–æ –¥–Ω—è–º –∏ —á–∞—Å–∞–º</h3>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container" id="activityTeamHeatmap"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å -->
                <div class="tab-pane" id="sentiment">
                    <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">–ê–Ω–∞–ª–∏–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π</h3>
                        </div>
                        <div class="card-body">
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <div class="sentiment-stat positive">
                                        <div class="sentiment-icon">üòä</div>
                                        <div class="sentiment-data">
                                            <div class="sentiment-count" id="positiveCount">0</div>
                                            <div class="sentiment-percentage" id="positivePercentage">0%</div>
                                            <div class="sentiment-label">–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="sentiment-stat negative">
                                        <div class="sentiment-icon">üò†</div>
                                        <div class="sentiment-data">
                                            <div class="sentiment-count" id="negativeCount">0</div>
                                            <div class="sentiment-percentage" id="negativePercentage">0%</div>
                                            <div class="sentiment-label">–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="sentiment-stat neutral">
                                        <div class="sentiment-icon">üòê</div>
                                        <div class="sentiment-data">
                                            <div class="sentiment-count" id="neutralCount">0</div>
                                            <div class="sentiment-percentage" id="neutralPercentage">0%</div>
                                            <div class="sentiment-label">–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="sentiment-stat overall">
                                        <div class="sentiment-icon">üìä</div>
                                        <div class="sentiment-data">
                                            <div class="sentiment-count" id="totalAnalyzed">0</div>
                                            <div class="sentiment-score" id="avgScore">0.00</div>
                                            <div class="sentiment-label">–û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="chart-container">
                                        <h5>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</h5>
                                        <div id="sentimentDistributionChart"></div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="chart-container">
                                        <h5>–î–∏–Ω–∞–º–∏–∫–∞ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ –¥–Ω—è–º</h5>
                                        <div id="sentimentTrendChart"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ -->
                <div class="tab-pane" id="communications">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è</h3>
                            <div class="d-flex align-items-center">
                                <select class="form-select form-select-sm me-2" id="communicationsLimit" style="width: auto;">
                                    <option value="20">20 —Å–æ–æ–±—â–µ–Ω–∏–π</option>
                                    <option value="50" selected>50 —Å–æ–æ–±—â–µ–Ω–∏–π</option>
                                    <option value="100">100 —Å–æ–æ–±—â–µ–Ω–∏–π</option>
                                </select>
                                <button class="btn btn-outline-primary btn-sm" onclick="refreshCommunications()">
                                    <i class="fas fa-sync-alt"></i> –û–±–Ω–æ–≤–∏—Ç—å
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="communications-container">
                                <!-- –§–∏–ª—å—Ç—Ä—ã —á–∞—Ç–æ–≤ -->
                                <div class="row mb-3">
                                    <div class="col-md-12">
                                        <div class="chat-tabs" id="chatTabs">
                                            <button class="chat-tab active" data-chat-id="" onclick="filterByChat('')">
                                                –í—Å–µ —á–∞—Ç—ã
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π -->
                                <div class="messages-list" id="messagesList">
                                    <div class="loading-placeholder">
                                        <i class="fas fa-spinner fa-spin"></i> –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Dashboard JavaScript -->
    <script>
        // Pass admin token to JavaScript
        var adminToken = '{{ admin_token }}';
    </script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
