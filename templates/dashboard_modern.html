<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä –î–∞—à–±–æ—Ä–¥ –ê–Ω–∞–ª–∏—Ç–∏–∫–∏ –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        .metric-card {
            transition: all 0.3s ease;
            border: 1px solid #e5e7eb;
        }
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .tab-button.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }
        .trend-up { color: #10b981; }
        .trend-down { color: #ef4444; }
        .trend-neutral { color: #6b7280; }
        .client-card {
            transition: all 0.3s ease;
            border-left: 4px solid #667eea;
        }
        .client-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .priority-high { 
            background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%); 
            color: #c53030;
        }
        .priority-medium { 
            background: linear-gradient(135deg, #fffbeb 0%, #fde68a 100%); 
            color: #d69e2e;
        }
        .priority-low { 
            background: linear-gradient(135deg, #d4f4dd 0%, #a7f3d0 100%); 
            color: #38a169;
        }
        .response-good { background-color: #d4f4dd; color: #38a169; }
        .response-warning { background-color: #fffbeb; color: #d69e2e; }
        .response-poor { background-color: #fed7d7; color: #c53030; }
        .chart-container {
            min-height: 300px;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                <div class="flex items-center mb-4 lg:mb-0">
                    <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-2 rounded-lg mr-3">
                        <i class="fas fa-chart-bar text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¢–µ—Å—Ç–æ–≤–æ–µ –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ</h1>
                        <p class="text-gray-600 text-sm">–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏</p>
                    </div>
                </div>
                
                <!-- –ü–µ—Ä–∏–æ–¥ –æ—Ç—á–µ—Ç–∞ -->
                <div class="flex flex-wrap items-center gap-2">
                    <label class="text-sm font-medium text-gray-700">–ü–µ—Ä–∏–æ–¥ –æ—Ç—á–µ—Ç–∞:</label>
                    <input type="date" id="startDate" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                    <span class="text-gray-500">‚Äî</span>
                    <input type="date" id="endDate" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                    <button id="updateButton" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors">
                        <i class="fas fa-sync-alt mr-2"></i>–û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                    <div class="text-xs text-gray-500">
                        –û–±–Ω–æ–≤–ª–µ–Ω–æ: <span id="lastUpdated">-</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 py-6">
        <!-- –§–∏–ª—å—Ç—Ä—ã -->
        <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">üîç –§–∏–ª—å—Ç—Ä—ã</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">–ß–∞—Ç:</label>
                    <select id="chatFilter" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                        <option value="">–í—Å–µ —á–∞—Ç—ã</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">–°–æ—Ç—Ä—É–¥–Ω–∏–∫:</label>
                    <select id="employeeFilter" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                        <option value="">–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</option>
                    </select>
                </div>
                <div class="flex items-end">
                    <button id="applyFilters" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors w-full">
                        <i class="fas fa-filter mr-2"></i>–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
                    </button>
                </div>
            </div>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ -->
        <div class="bg-white rounded-xl shadow-sm mb-6">
            <div class="border-b border-gray-200">
                <nav class="flex space-x-8 px-6" aria-label="Tabs">
                    <button class="tab-button py-4 px-1 border-b-2 font-medium text-sm transition-colors border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 active" data-tab="dashboard">
                        <i class="fas fa-tachometer-alt mr-2"></i>–î–∞—à–±–æ—Ä–¥
                    </button>
                    <button class="tab-button py-4 px-1 border-b-2 font-medium text-sm transition-colors border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="clients">
                        <i class="fas fa-users mr-2"></i>–ö–ª–∏–µ–Ω—Ç—ã
                    </button>
                    <button class="tab-button py-4 px-1 border-b-2 font-medium text-sm transition-colors border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="activity">
                        <i class="fas fa-chart-line mr-2"></i>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
                    </button>
                    <button class="tab-button py-4 px-1 border-b-2 font-medium text-sm transition-colors border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="sentiment">
                        <i class="fas fa-smile mr-2"></i>–¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
                    </button>
                    <button class="tab-button py-4 px-1 border-b-2 font-medium text-sm transition-colors border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="communications">
                        <i class="fas fa-comments mr-2"></i>–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
                    </button>
                    <button class="tab-button py-4 px-1 border-b-2 font-medium text-sm transition-colors border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="employees">
                        <i class="fas fa-user-tie mr-2"></i>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
                    </button>
                </nav>
            </div>
        </div>

        <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫ -->
        <div id="tabContent">
            <!-- –í–∫–ª–∞–¥–∫–∞ –î–∞—à–±–æ—Ä–¥ -->
            <div class="tab-content active" id="dashboard">
                <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="metric-card bg-white rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-medium text-gray-600">–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π</h3>
                            <i class="fas fa-comments text-blue-500"></i>
                        </div>
                        <div class="text-3xl font-bold text-gray-900 mb-1" id="totalMessages">0</div>
                        <div class="flex items-center text-sm">
                            <span class="text-gray-500">–∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥</span>
                        </div>
                    </div>

                    <div class="metric-card bg-white rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-medium text-gray-600">–°–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤</h3>
                            <i class="fas fa-user text-purple-500"></i>
                        </div>
                        <div class="text-3xl font-bold text-gray-900 mb-1" id="clientMessages">0</div>
                        <div class="flex items-center text-sm">
                            <span class="text-gray-500" id="clientPercent">0% –æ—Ç –æ–±—â–µ–≥–æ</span>
                        </div>
                    </div>

                    <div class="metric-card bg-white rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-medium text-gray-600">–°–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –∫–æ–º–∞–Ω–¥—ã</h3>
                            <i class="fas fa-users text-green-500"></i>
                        </div>
                        <div class="text-3xl font-bold text-gray-900 mb-1" id="teamMessages">0</div>
                        <div class="flex items-center text-sm">
                            <span class="text-gray-500" id="teamPercent">0% –æ—Ç –æ–±—â–µ–≥–æ</span>
                        </div>
                    </div>

                    <div class="metric-card bg-white rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-medium text-gray-600">–í—Å–µ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤</h3>
                            <i class="fas fa-font text-indigo-500"></i>
                        </div>
                        <div class="text-3xl font-bold text-gray-900 mb-1" id="totalCharacters">0</div>
                        <div class="flex items-center text-sm">
                            <span class="text-gray-500">–≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ö–ª–∏–µ–Ω—Ç—ã -->
            <div class="tab-content" id="clients">
                <!-- –ì—Ä–∞—Ñ–∏–∫–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <div class="lg:col-span-2">
                        <div class="bg-white rounded-xl shadow-sm p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-900">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤</h3>
                                <div class="flex gap-2">
                                    <button class="px-3 py-1 text-xs bg-purple-100 text-purple-700 rounded-lg" onclick="dashboard.toggleClientChartType('messages')">–ü–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º</button>
                                    <button class="px-3 py-1 text-xs bg-gray-100 text-gray-600 rounded-lg" onclick="dashboard.toggleClientChartType('characters')">–ü–æ —Å–∏–º–≤–æ–ª–∞–º</button>
                                </div>
                            </div>
                            <div class="chart-container" id="clientActivityChart"></div>
                        </div>
                    </div>
                    <div>
                        <div class="bg-white rounded-xl shadow-sm p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">–î–æ–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
                            <div class="chart-container" id="clientDistributionChart"></div>
                        </div>
                    </div>
                </div>

                <!-- –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö</h3>
                        <div class="flex gap-2 mt-4 sm:mt-0">
                            <button class="px-4 py-2 text-sm bg-purple-100 text-purple-700 rounded-lg" onclick="dashboard.toggleClientView('cards')">
                                <i class="fas fa-th-large mr-2"></i>–ö–∞—Ä—Ç–æ—á–∫–∏
                            </button>
                            <button class="px-4 py-2 text-sm bg-gray-100 text-gray-600 rounded-lg" onclick="dashboard.toggleClientView('table')">
                                <i class="fas fa-table mr-2"></i>–¢–∞–±–ª–∏—Ü–∞
                            </button>
                        </div>
                    </div>
                    
                    <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
                    <div id="clientCardsView" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Client cards will be populated here -->
                    </div>

                    <!-- –¢–∞–±–ª–∏—Ü–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
                    <div id="clientTableView" class="hidden overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–ö–ª–∏–µ–Ω—Ç</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–°–æ–æ–±—â–µ–Ω–∏—è</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</th>
                                </tr>
                            </thead>
                            <tbody id="clientsTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Table rows will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -->
            <div class="tab-content" id="activity">
                <!-- –ú–µ—Ç—Ä–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="metric-card bg-white rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-medium text-gray-600">–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π</h3>
                            <i class="fas fa-chart-bar text-blue-500"></i>
                        </div>
                        <div class="text-3xl font-bold text-gray-900 mb-1" id="activityTotalMessages">0</div>
                        <div class="flex items-center text-sm">
                            <span class="text-gray-500">–∑–∞ –ø–µ—Ä–∏–æ–¥</span>
                        </div>
                    </div>

                    <div class="metric-card bg-white rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-medium text-gray-600">–°—Ä–µ–¥–Ω–µ–µ –∑–∞ –ø–µ—Ä–∏–æ–¥</h3>
                            <i class="fas fa-calculator text-green-500"></i>
                        </div>
                        <div class="text-3xl font-bold text-gray-900 mb-1" id="activityAvgPerPeriod">0</div>
                        <div class="flex items-center text-sm">
                            <span class="text-gray-500" id="activityAvgLabel">—Å–æ–æ–±—â–µ–Ω–∏–π</span>
                        </div>
                    </div>

                    <div class="metric-card bg-white rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-medium text-gray-600">–ü–∏–∫–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥</h3>
                            <i class="fas fa-mountain text-orange-500"></i>
                        </div>
                        <div class="text-2xl font-bold text-gray-900 mb-1" id="activityPeakPeriod">-</div>
                        <div class="flex items-center text-sm">
                            <span class="text-gray-500" id="activityPeakCount">0 —Å–æ–æ–±—â–µ–Ω–∏–π</span>
                        </div>
                    </div>

                    <div class="metric-card bg-white rounded-xl p-6">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-sm font-medium text-gray-600">–ü–∏–∫–æ–≤—ã–π —á–∞—Å</h3>
                            <i class="fas fa-clock text-purple-500"></i>
                        </div>
                        <div class="text-3xl font-bold text-gray-900 mb-1" id="activityPeakHour">-</div>
                        <div class="flex items-center text-sm">
                            <span class="text-gray-500" id="activityPeakHourCount">0 —Å–æ–æ–±—â–µ–Ω–∏–π</span>
                        </div>
                    </div>
                </div>

                <!-- –ö–æ–Ω—Ç—Ä–æ–ª—ã –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ -->
                <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4 sm:mb-0">–ê–Ω–∞–ª–∏–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
                        <div class="flex gap-2">
                            <button class="px-4 py-2 text-sm bg-purple-100 text-purple-700 rounded-lg activity-grouping-btn active" data-grouping="day">
                                <i class="fas fa-calendar-day mr-2"></i>–ü–æ –¥–Ω—è–º
                            </button>
                            <button class="px-4 py-2 text-sm bg-gray-100 text-gray-600 rounded-lg activity-grouping-btn" data-grouping="week">
                                <i class="fas fa-calendar-week mr-2"></i>–ü–æ –Ω–µ–¥–µ–ª—è–º
                            </button>
                            <button class="px-4 py-2 text-sm bg-gray-100 text-gray-600 rounded-lg activity-grouping-btn" data-grouping="month">
                                <i class="fas fa-calendar mr-2"></i>–ü–æ –º–µ—Å—è—Ü–∞–º
                            </button>
                        </div>
                    </div>
                </div>

                <!-- –ì—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
                <div class="space-y-6">
                    <!-- Time-series –≥—Ä–∞—Ñ–∏–∫ -->
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —à–∫–∞–ª–µ</h3>
                        <div class="chart-container" id="activityTimeSeriesChart"></div>
                    </div>

                    <!-- –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –ø–æ —á–∞—Å–∞–º -->
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —á–∞—Å–∞–º</h3>
                        <div class="chart-container" id="activityHourHistogram"></div>
                    </div>

                    <!-- –¢–µ–ø–ª–æ–≤—ã–µ –∫–∞—Ä—Ç—ã -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-xl shadow-sm p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –¥–Ω—è–º –∏ —á–∞—Å–∞–º</h3>
                            <div class="chart-container" id="activityClientHeatmap"></div>
                        </div>
                        <div class="bg-white rounded-xl shadow-sm p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø–æ –¥–Ω—è–º –∏ —á–∞—Å–∞–º</h3>
                            <div class="chart-container" id="activityTeamHeatmap"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å -->
            <div class="tab-content" id="sentiment">
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-6">–ê–Ω–∞–ª–∏–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π</h3>
                    
                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="metric-card bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-sm font-medium text-green-800">–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ</h3>
                                <i class="fas fa-smile text-green-600"></i>
                            </div>
                            <div class="text-3xl font-bold text-green-900 mb-1" id="positiveCount">0</div>
                            <div class="text-sm text-green-700" id="positivePercent">0%</div>
                        </div>

                        <div class="metric-card bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-sm font-medium text-red-800">–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ</h3>
                                <i class="fas fa-frown text-red-600"></i>
                            </div>
                            <div class="text-3xl font-bold text-red-900 mb-1" id="negativeCount">0</div>
                            <div class="text-sm text-red-700" id="negativePercent">0%</div>
                        </div>

                        <div class="metric-card bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-sm font-medium text-gray-800">–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ</h3>
                                <i class="fas fa-meh text-gray-600"></i>
                            </div>
                            <div class="text-3xl font-bold text-gray-900 mb-1" id="neutralCount">0</div>
                            <div class="text-sm text-gray-700" id="neutralPercent">0%</div>
                        </div>

                        <div class="metric-card bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-sm font-medium text-blue-800">–û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥</h3>
                                <i class="fas fa-chart-line text-blue-600"></i>
                            </div>
                            <div class="text-3xl font-bold text-blue-900 mb-1" id="avgScore">0.00</div>
                            <div class="text-sm text-blue-700" id="totalAnalyzed">0 –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ</div>
                        </div>
                    </div>

                    <!-- –ì—Ä–∞—Ñ–∏–∫–∏ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-md font-medium text-gray-900 mb-4">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</h4>
                            <div class="chart-container" id="sentimentDistributionChart"></div>
                        </div>
                        <div>
                            <h4 class="text-md font-medium text-gray-900 mb-4">–î–∏–Ω–∞–º–∏–∫–∞ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ –¥–Ω—è–º</h4>
                            <div class="chart-container" id="sentimentTrendChart"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ -->
            <div class="tab-content" id="communications">
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏</h3>
                        <div class="flex flex-wrap gap-2 mt-4 sm:mt-0">
                            <select id="communicationsLimit" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                <option value="20">20 —Å–æ–æ–±—â–µ–Ω–∏–π</option>
                                <option value="50" selected>50 —Å–æ–æ–±—â–µ–Ω–∏–π</option>
                                <option value="100">100 —Å–æ–æ–±—â–µ–Ω–∏–π</option>
                            </select>
                            <select id="communicationsFilter" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                <option value="all">–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è</option>
                                <option value="client">–¢–æ–ª—å–∫–æ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤</option>
                                <option value="team">–¢–æ–ª—å–∫–æ –æ—Ç –∫–æ–º–∞–Ω–¥—ã</option>
                            </select>
                            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors" onclick="dashboard.refreshCommunications()">
                                <i class="fas fa-sync-alt mr-2"></i>–û–±–Ω–æ–≤–∏—Ç—å
                            </button>
                        </div>
                    </div>
                    
                    <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã -->
                    <div class="mb-6">
                        <h4 class="text-md font-medium text-gray-900 mb-4">–ê–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã</h4>
                        <div id="chatsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Chat cards will be populated here -->
                        </div>
                    </div>

                    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
                    <div>
                        <h4 class="text-md font-medium text-gray-900 mb-4">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è</h4>
                        <div id="messagesContainer" class="space-y-4">
                            <!-- Messages will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ -->
            <div class="tab-content" id="employees">
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-6">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
                    
                    <!-- –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
                    <div class="mb-8">
                        <h4 class="text-md font-medium text-gray-900 mb-4">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h4>
                        <div class="chart-container" id="employeeActivityChart"></div>
                    </div>
                    
                    <!-- –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
                    <div>
                        <h4 class="text-md font-medium text-gray-900 mb-4">–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–°–æ–æ–±—â–µ–Ω–∏—è</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–°–∏–º–≤–æ–ª—ã</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–°—Ä. –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</th>
                                    </tr>
                                </thead>
                                <tbody id="employeesTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- Employee rows will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
        window.adminToken = '771G@zoviK';
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞—à–±–æ—Ä–¥–∞
        let dashboard;
        document.addEventListener('DOMContentLoaded', function() {
            dashboard = new FilteredDashboard();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', function() {
                    const tabName = this.dataset.tab;
                    switchTab(tabName);
                });
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
            document.querySelectorAll('.activity-grouping-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const grouping = this.dataset.grouping;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
                    document.querySelectorAll('.activity-grouping-btn').forEach(btn => {
                        btn.classList.remove('active', 'bg-purple-100', 'text-purple-700');
                        btn.classList.add('bg-gray-100', 'text-gray-600');
                    });
                    this.classList.add('active', 'bg-purple-100', 'text-purple-700');
                    this.classList.remove('bg-gray-100', 'text-gray-600');
                    
                    dashboard.loadActivityData(grouping);
                });
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
            document.getElementById('applyFilters').addEventListener('click', function() {
                dashboard.applyFilters();
            });

            document.getElementById('updateButton').addEventListener('click', function() {
                dashboard.applyFilters();
            });

            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            setDefaultDates();
        });

        function switchTab(tabName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
                button.classList.add('border-transparent', 'text-gray-500');
                button.classList.remove('border-purple-500', 'text-purple-600');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            const targetTab = document.getElementById(tabName);
            const targetButton = document.querySelector(`[data-tab="${tabName}"]`);
            
            if (targetTab && targetButton) {
                targetTab.classList.add('active');
                targetButton.classList.add('active', 'border-purple-500', 'text-purple-600');
                targetButton.classList.remove('border-transparent', 'text-gray-500');
                
                // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
                dashboard.loadTabData(tabName);
            }
        }

        function setDefaultDates() {
            const endDate = new Date();
            const startDate = new Date();
            startDate.setDate(endDate.getDate() - 7);
            
            document.getElementById('startDate').value = startDate.toISOString().split('T')[0];
            document.getElementById('endDate').value = endDate.toISOString().split('T')[0];
        }
    </script>
</body>
</html>